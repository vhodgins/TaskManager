{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">
<style media="screen">
  #titlearea {
    overflow:hidden;
  }

  #titlearea:focus {
  animation-name: postarea-expand;
  animation-duration:100ms;
  animation-fill-mode: forwards;
  }

  @keyframes postarea-expand {
        0% {
          height:80px;
        }
        100%{
          height: 200px;
        }
  }
</style>



<div class="buffer" style=" height: 10.2vh"></div>


  {% if current_user.id==task.author.id %}
  <section>
    <div class="card" id='tasksection{{task.id}}'style="background: white">

        <div class=" mt-2 ml-2 " style="">

          <div class="" style="display:flex; flex-direction:row;">

          <div class="mr-4 bg-info" style="">
            {% if account.id == current_user.id %}
            {% if task.content != "Completed" %}

          <a href="#" class='updatebutton' id='button{{task.id}}' style=" background: transparent;
        border: none !important; "  task_id='{{task.id}}' name="button">
            <img style="width:25px;" id='buttonimg{{task.id}}' src="{{url_for('static', filename='assets/check.png')}}">
          </a>


            {% else %}
            <a href="#" class='updatebutton ' id='button{{task.id}}' style="background: transparent;
          border: none !important; "  task_id='{{task.id}}' name="button">
              <img style="width:25px; " id='buttonimg{{task.id}}' src="{{url_for('static', filename='assets/x.png')}}">
            </a>
            {% endif %}
            {% endif %}
          </div>



          <section style="width:360px; margin-left:25px; margin-bottom: -30px; line-height:20px; margin-top:5px;">
            <form class="mt-2" style="display:flex; flex-direction:row;" action="" method="post">
                  {{form.hidden_tag()}}
                  {%if form.title.errors%}
                  {{form.title(class="form-control form-control is-invalid")}}
                  <div class="invalid-feedback">
                    {%for error in form.title.errors%}
                      <span>{{error}}</span>
                    {%endfor%}
                    </div>
                  {%else%}
                    {{form.title(class="form-control", id="titlearea", style="resize: none;width: 400px;background: inherit;")}}
                    {%endif%}
                  {{form.submit(class="ml-3 btn btn-sm btn-outline-info" , style="height: 50px;")}}
            </form>
          </section>


          </div>
          <section>

        </section>

        <div style="">


            <div style="float:right; margin-right: 10px;">
              <a href="#"><img style="position: relative; top:22px; left: 70px; width:17px;"src="{{url_for('static', filename='assets/like.png')}}" alt=""></a>
              <p class="" style="position:relative; left: 92px;font-size:12pt; font-weight:400; margin-bottom:0px;">{{task.likes}}</p>
              <p class="text-muted" style=" font-size:10pt; margin-bottom:5px;">{{localtime.strftime('%I:%M %p %x')}}</p>
            </div>


          </div>





        <!--  <li class="font-weight-light ml-3"  id='content{{task.id}}'>{{task.content}}</li>
    -->






    </div>
    </div>
  </section>

  {% endif %}
  {% if current_user.id != task.author.id %}

  <div class="card">
    <section style="display:flex; flex-direction:row; width:100%">
      <img src="{{url_for('static', filename='pfps/'+task.author.image_file)}}"  class="ml-2 mt-2" style="width:50px; height:50px; border-radius:5px"alt="">
      <h3 style="position:relative; top: 15px; left: 10px;">{{task.author.username}}</h3>
      <p style="font-weight: 200;position:relative; top:25px; left:15px;">{{localtime.strftime('%I:%M %p %x')}}</p>
      {% if task.content == "Completed" %}
      <img style="position:absolute; right:20px; top: 15px" src="{{url_for('static', filename='assets/x.png')}}" width="23px;">
      {% else %}
      <img style="position:absolute; right:20px; top: 15px" src="{{url_for('static', filename='assets/check.png')}}" width="23px;">
      {% endif %}
    </section>
    <section style="margin: 10px 20px 10px 20px">
      {{task.title}}
    </section>

  </div>



  {% endif %}


  <div class="mt-4 card comments" style="width: 70%">
    {% for comment in task.comments %}
      {% include "comment_proto.html" %}
    {% endfor %}
  </div>

<script src="{{url_for('static', filename='scripts/check.js')}}"></script>
</div>
{% endblock content %}
