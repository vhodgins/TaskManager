{% extends 'layout.html' %}

{% block content %}

<style media="screen">
  #titlearea {
    overflow:hidden;
  }

  #titlearea:focus {
  animation-name: postarea-expand;
  animation-duration:100ms;
  animation-fill-mode: forwards;
  }

  @keyframes postarea-expand {
        0% {
          height:80px;
        }
        100%{
          height: 200px;
        }
  }
</style>



<div class="buffer" style=" height: 10.2vh"></div>


  {% if current_user.id==task.author.id %}


  <div class="card">
    <h2 class="mt-2 ml-5 mb-1"><i style="font-weight:200">Edit Post</i></h2>
    <section style="display:flex; flex-direction:row;">
      <form class="mt-2 ml-5 mb-5" style="display:flex; flex-direction:row;" action="" method="post">
            {{form.hidden_tag()}}
            {%if form.title.errors%}
            {{form.title(class="form-control form-control is-invalid")}}
            <div class="invalid-feedback">
              {%for error in form.title.errors%}
                <span>{{error}}</span>
              {%endfor%}
              </div>
            {%else%}
              {{form.title(class="form-control", id="titlearea", style="width: 400px;background: inherit;")}}
              {%endif%}
            {{form.submit(class="ml-3 btn btn-sm btn-outline-info" , style="height: 50px;")}}
      </form>

      {% if task.content != "Completed" %}
    <a href="#" class='updatebutton ' id='button{{task.id}}' style="background: transparent;  border: none !important; margin-top:-20px;"  task_id='{{task.id}}' name="button">
      <img style="width:25px; position:absolute; top:20px; right: 20px;" id='buttonimg{{task.id}}' src="{{url_for('static', filename='assets/check.png')}}">
    </a>
      {% else %}
      <a href="#" class='updatebutton ' id='button{{task.id}}' style="background: transparent; border: none !important; margin-top:-20px;"  task_id='{{task.id}}' name="button">
        <img style="width:25px; position:absolute; top:20px; right: 20px;" id='buttonimg{{task.id}}' src="{{url_for('static', filename='assets/x.png')}}">
      </a>
      {% endif %}
  </section>


</div>
  {% endif %}
  {% if current_user.id != task.author.id %}

  <div class="card">
    <section style="display:flex; flex-direction:row; width:100%">
      <img src="{{url_for('static', filename='pfps/'+task.author.image_file)}}"  class="ml-2 mt-2" style="width:50px; height:50px; border-radius:5px"alt="">
      <h3 style="position:relative; top: 15px; left: 10px;">{{task.author.username}}</h3>
      <p style="font-weight: 200;position:relative; top:25px; left:15px;">{{localtime.strftime('%I:%M %p %x')}}</p>
      {% if task.content == "Completed" %}
      <img style="position:absolute; right:20px; top: 15px" src="{{url_for('static', filename='assets/x.png')}}" width="23px;">
      {% else %}
      <img style="position:absolute; right:20px; top: 15px" src="{{url_for('static', filename='assets/check.png')}}" width="23px;">
      {% endif %}
    </section>
    <section style="margin: 10px 20px 10px 20px">
      {{task.title}}
    </section>

  </div>



  {% endif %}


  <div class="mt-4 card comments" style="width: 70%">
    {% for comment in task.comments %}
      {% include "comment_proto.html" %}
    {% endfor %}
  </div>

<script src="{{url_for('static', filename='scripts/check.js')}}"></script>

{% endblock content %}
